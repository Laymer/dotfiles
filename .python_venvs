#!/usr/bin/env bash
# A better virtualenvwrapper

export WORKON_HOME="$HOME/.venvs"

workon () {
  if [ "$1" == "" ]; then
    for venv in "${WORKON_HOME}"/*; do
      [ -f "${venv}/bin/activate" ] && basename "${venv}"
    done
    return
  fi
  . "${WORKON_HOME}/$1/bin/activate"
}

mkenv2 () {
  deactivate || true
  if [ -f "$WORKON_HOME/$1/bin/activate" ]; then
    . "$WORKON_HOME/$1/bin/activate"
  else
    pushd "$WORKON_HOME"
    virtualenv -p python2.7 "$@"
    workon $1
    popd
  fi
}

mkenv () {
  deactivate || true
  if [ -f "$WORKON_HOME/$1/bin/activate" ]; then
    . "$WORKON_HOME/$1/bin/activate"
  else
    pushd "$WORKON_HOME"
    python3 -m venv "$@"
    workon $1
    popd
  fi
}
